<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">

<link rel="import" href="../styles/page-shared-style.html">

<link rel="import" href="../behaviors/app-behavior.html">

<link rel="import" href="../elements/page-header.html">

<dom-module id="organizer-page">
    <template>
        <style include="page-shared-style">
            .login-form {
                width: 250px;
            }

            .contact-info paper-input {
                max-width: 250px;
            }
        </style>

        <firebase-document
                app-name="agnes"
                path="/orgs/[[app.auth.user.uid]]"
                data="{{organizer}}">
        </firebase-document>

        <page-header app="[[app]]"></page-header>

        <div class="container">
            <div class="block columns">
                <div class="column">
                    <h2>[[organizer.name]]</h2>
                    <span class="state">[[_getOrganizerStateName(organizer.state)]]</span>
                    <div class="contact-info">
                        <h3>Kontaktní info</h3>
                        <paper-input label="E-mail" value="[[organizer.contactInfo.email]]"></paper-input>
                        <paper-input label="Telefon" value="[[organizer.contactInfo.phone]]"></paper-input>
                    </div>
                </div>
                <div class="column">
                    <h3>Skupiny</h3>
                    <span>TODO</span>
                </div>
            </div>
            <div class="block">
                <h2>Slack Account</h2>
                <div>
                    <span>ID: [[organizer.accounts.slack.userId]]</span>
                </div>
            </div>
            <div class="block">
                <h2>GUG.cz Account</h2>
                <template is="dom-if" if="[[!organizer.accounts.gug_cz]]">
                    <div class="login-form">
                        <span>Not authorized</span>
                        <paper-input label="GUG.cz Username"></paper-input>
                        <paper-input label="GUG.cz Password" type="password"></paper-input>
                        <paper-button raised disabled>Obtain token</paper-button>
                    </div>
                </template>
            </div>
            <div class="block">
                <h2>Meetup Account</h2>
                <div>
                    <span>Unsupported</span>
                </div>
            </div>
        </div>
    </template>
    <script>
      (function () {
        'use strict'

        class OrganizerPage {

          get behaviors () {
            return PAIN.behaviors.get([
              PAIN.AppBehavior
            ])
          }

          beforeRegister () {
            this.is = 'organizer-page'
          }

          _getOrganizerStateName (state) {
            if (state >= 40) {
              return 'Obersteiger'
            } else if (state >= 30) {
              return 'Veterán'
            } else if (state >= 20) {
              return 'Aktivní organizátor'
            } else if (state >= 10) {
              return 'Neaktivní organizátor'
            } else {
              return 'Neznámý stav'
            }
          }

        }
        Polymer(OrganizerPage)
      })()
    </script>
</dom-module>